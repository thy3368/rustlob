version: '3.8'

services:
  xdp_libbpf:
    build: .
    container_name: xdp_libbpf
    privileged: true  # 需要特权模式来加载eBPF程序
    network_mode: "host"  # 使用主机网络模式以访问网络接口
    environment:
      - RUST_BACKTRACE=full
    volumes:
      - ./target:/app/target  # 挂载target目录以保留构建结果
    command: ["./target/release/xdp_libbpf", "--iface", "lo"]